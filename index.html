<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>Biomarker Invaders — Antibody Shooter (Touch Enabled)</title>
<style>
  body{margin:0;background:#07111f;color:#fff;font-family:sans-serif;display:flex;flex-direction:column;align-items:center}
  canvas{background:#06132b;border:2px solid #1a2c62;border-radius:12px;touch-action:none}
  .touchpad{position:fixed;left:0;right:0;bottom:10px;display:flex;justify-content:center;gap:16px;}
  .tbtn{min-width:80px;min-height:80px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.25);border-radius:18px;
        display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;font-size:18px;user-select:none;touch-action:none;}
  .tbtn:active{background:rgba(255,255,255,0.2);}
</style>
</head>
<body>
<h1>Biomarker Invaders</h1>
<canvas id="game" width="800" height="640"></canvas>

<div class="touchpad" id="touchpad">
  <div class="tbtn" id="btnLeft">◀</div>
  <div class="tbtn" id="btnRight">▶</div>
  <div class="tbtn" id="btnFire">FIRE</div>
  <div class="tbtn" id="btnPause">PAUSE</div>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;

let player = { x: W/2, y: H-40, speed: 6 };
let bullets = [];
let keys = new Set();
let running = true;

function shoot(){ bullets.push({x:player.x,y:player.y-20,vy:-8}); }

window.addEventListener('keydown', e=>{ keys.add(e.key); if(e.key===' ') shoot(); });
window.addEventListener('keyup', e=> keys.delete(e.key));

function step(){
  if(running){
    if(keys.has('ArrowLeft')) player.x -= player.speed;
    if(keys.has('ArrowRight')) player.x += player.speed;
    player.x = Math.max(20, Math.min(W-20, player.x));
    bullets.forEach(b=> b.y+=b.vy);
    bullets = bullets.filter(b=> b.y>-20);
  }
  draw();
  requestAnimationFrame(step);
}

function draw(){
  ctx.fillStyle='#06132b'; ctx.fillRect(0,0,W,H);
  ctx.fillStyle='#4da6ff';
  ctx.fillRect(player.x-15, player.y-10, 30, 20);
  ctx.fillStyle='#c084fc';
  bullets.forEach(b=> ctx.fillRect(b.x-2,b.y-10,4,10));
}

step();

// Touch controls
function attachHold(btn,key){
  let timer=null;
  btn.addEventListener('pointerdown',e=>{e.preventDefault();keys.add(key);timer=setInterval(()=>keys.add(key),100);});
  btn.addEventListener('pointerup',e=>{e.preventDefault();keys.delete(key);clearInterval(timer);});
  btn.addEventListener('pointerleave',()=>{keys.delete(key);clearInterval(timer);});
}
attachHold(document.getElementById('btnLeft'),'ArrowLeft');
attachHold(document.getElementById('btnRight'),'ArrowRight');

let fireTimer=null;
document.getElementById('btnFire').addEventListener('pointerdown',e=>{e.preventDefault();shoot();fireTimer=setInterval(shoot,200);});
['pointerup','pointerleave'].forEach(ev=>document.getElementById('btnFire').addEventListener(ev,()=>{clearInterval(fireTimer);}));

document.getElementById('btnPause').addEventListener('pointerdown',e=>{e.preventDefault();running=!running;});
</script>
</body>
</html>